<html>

<head>
<title>New Page 11</title>
<meta name="GENERATOR" content="Microsoft FrontPage 3.0">
<base target="_top">
</head>

<body link="#0000FF" vlink="#0000FF" alink="#0000FF">

<p><big><font face="Bookman Old Style"><b>Decyption In C++</b></font></big></p>

<p>#include&lt;string.h&gt;<br>
#include&lt;stdio.h&gt;<br>
#include&lt;conio.h&gt;<br>
#include&lt;iostream.h&gt;<br>
#include&lt;process.h&gt;<br>
void main(int argc,char *argv[])<br>
{<br>
FILE *nor,*enc;<br>
clrscr();<br>
if(argc!=2)<br>
{<br>
cout&lt;&lt;&quot;insufficient arguments!!&quot;;<br>
getch();<br>
exit(0);<br>
}<br>
enc=fopen(argv[1],&quot;rb&quot;);<br>
if(nor==NULL)<br>
{<br>
cout&lt;&lt;endl&lt;&lt;&quot;File opening error!!&quot;;<br>
exit(0);<br>
}<br>
fseek(enc,-6,SEEK_END);<br>
char my[7]=&quot;pankaj&quot;;<br>
char urs[7],ch='a';<br>
for(int j=0;j&lt;6;j++)<br>
urs[j]=fgetc(enc)-100;<br>
urs[6]='\0';<br>
if(strcmp(my,urs))<br>
{<br>
cout&lt;&lt;&quot;file not encrypted by Encryption 1.00&quot;;<br>
getch();<br>
exit(0);<br>
}<br>
rewind(enc);<br>
cout&lt;&lt;&quot;Enter password to decrypt file (Maximum 10 characters): &quot;;<br>
char passwd[11];<br>
int i=0;<br>
while(ch!='\r'&amp;&amp;i&lt;10)<br>
{<br>
ch=getch();<br>
if(ch!='\r')<br>
{<br>
passwd[i]=ch;<br>
i++;<br>
printf(&quot;*&quot;);<br>
}<br>
if(ch=='\r'&amp;&amp;i==0)<br>
{<br>
cout&lt;&lt;endl&lt;&lt;&quot;Please enter password: &quot;;<br>
ch='a';<br>
}<br>
}<br>
passwd[i]='\0';<br>
i=0;<br>
ch=fgetc(enc);<br>
int l=ch-48;<br>
char old[11];<br>
while(i&lt;l)<br>
{<br>
ch=fgetc(enc)-100;<br>
old[i]=ch;<br>
i++;<br>
}<br>
old[i]='\0';<br>
i=0;<br>
if(strcmp(passwd,old)!=0)<br>
{<br>
cout&lt;&lt;endl&lt;&lt;&quot;Wrong Password!!&quot;;<br>
getch();<br>
exit(0);<br>
}<br>
nor=fopen(&quot;temp.dec&quot;,&quot;wb&quot;);<br>
int len=strlen(passwd);<br>
int cnt=0;<br>
while((ch=fgetc(enc))!=EOF)<br>
{<br>
if(i==len-1)<br>
i=0;<br>
cnt++;<br>
ch=ch-passwd[i];<br>
fputc(ch,nor);<br>
i++;<br>
}<br>
cnt=cnt-6;<br>
fclose(nor);<br>
fclose(enc);<br>
FILE *normal;<br>
nor=fopen(&quot;temp.dec&quot;,&quot;rb&quot;);<br>
normal=fopen(&quot;tem.nor&quot;,&quot;wb&quot;);<br>
for(i=0;i&lt;cnt;i++)<br>
{<br>
ch=fgetc(nor);<br>
fputc(ch,normal);<br>
}<br>
fclose(nor);<br>
fclose(normal);<br>
remove(argv[1]);<br>
remove(&quot;temp.dec&quot;);<br>
rename(&quot;tem.nor&quot;,argv[1]);<br>
cout&lt;&lt;endl&lt;&lt;&quot;File sucessfully decrypted.&quot;;<br>
getch();<br>
}</p>
</body>
</html>
